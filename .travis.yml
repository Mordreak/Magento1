# Travis CI Configuration File


language:   php
#sudo:       false
#dist:       trusty

php:
#  - 5.3
#  - 5.4
#  - 5.5
  - 5.6
#  - 7.0
#  - hhvm
matrix:
  allow_failures:
#  - php: 7.0
  - php: 5.6
#  - php: hhvm

global:
#    - MAGENTO_DB_ALLOWSAME=1
    - SKIP_CLEANUP=1
    
env:
    - MAGENTO_VERSION=magento-mirror-1.9.0.1
#  - MAGENTO_VERSION=magento-ce-1.9.0.1
#  - MAGENTO_VERSION=magento-ce-1.8.1.0
#  - MAGENTO_VERSION=magento-ce-1.8.0.0
#  - MAGENTO_VERSION=magento-ce-1.7.0.2

install:
    # Install Magento & Modules
    - curl -sSL https://raw.githubusercontent.com/SplashSync/MageTestStand/travis/setup.sh | bash

    # Install MageRun
    - wget https://files.magerun.net/n98-magerun.phar
    - chmod +x ./n98-magerun.phar

    # Disable Xdebug ...
    - phpenv config-rm xdebug.ini
    
before_script:
    # Print Installation Infos
    - pwd
    - ls -l
    - phpunit --version
    - ./n98-magerun.phar --version
    
    - ls -l 
    - ls -l ../
    - ls -l ../../
#    - cd $SOURCE_DIR
    
    - ./n98-magerun.phar sys:modules:list
    - ./n98-magerun.phar config:get splashsync_splash_options/*

script:
#  - curl -sSL https://raw.githubusercontent.com/SplashSync/MageTestStand/travis-ci_reject_vcs/setup.sh | bash
#  - curl -sSL https://raw.githubusercontent.com/ffuenf/MageTestStand/master/script.sh | bash
  - phpunit
  
#  - phpunit -c build/phpunit.xml.dist 
        
notifications:
  email:         
    on_success: never # default: change
    on_failure: never # default: always

after_failure:
